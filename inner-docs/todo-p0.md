========================

Ввести TIA_TESTS_DIR.

TIA_REQUIRE_MODULES

// requireModulesEnvVarName


Рядом создаются логи и профайлы.
Добавить игнор директории профайлов, даже не заходить в такие директории.
Как будто их просто нет.



Упростить работу с опциями в tia.js.

Документация по TIA_TESTS_DIR и по структуре:
my-tests
mytests.log
profilesRoot


Попробовать ускорить логин, за счет предустановленных профайлов.
Не знаю нужно ли тут убивать логин.
Он, вроде, у меня автоматом убивается при hl login.
Но вообще нужно сделать режим, чтобы и без логина заходилось, если явно он не требуется тестом.




========================

?? Опции командной строки против локального конфига директорий.
Даже если в главном конфиге включен трейсинг, внутри его можно выключить.
Все-таки опции командной строки должны перегружать все конфиги.

Т.е. допустим, в опциях будет все, что есть в default-dir-config.js.
И наоборот.
Но, опции командной строки, все-таки будут храниться отдельно.
И при копировании конфигов - перегружаться.
При обработке конфига директории (если он есть), - дополнительное копирование из cmdOpts.


# Переделки в режимах запуска

* Продублировать все, что есть в параметрах в config.js, suite-config.js.
  Подумать над улучшением названий cmd line опций.
  
* Сделать так, чтобы вместо gIn.params использовались gIn.config / gIn.suiteConfig.

* Добавить ошибку, что нет настроек для мейла, если мейл используется.

====

Запуск:

tia <command> [options]
[--cfg-dir]

Порядок поиска:
* --cfg-dir
* TIA_CONFIG_DIR
* current working dir

Если конфига не найдено - искать необходимые параметры в опциях.
suiteRoot.
Опции из коммандной строки перебивают опции из конфига.

====

commands:

Опции, не используемые командой должны генерить - unknown option.
Поэтому, сначала считываешь команду, затем задаешь параметры минимисту.

* run - прогнать тесты.

==

* init - создать шаблоны для рутовых конфигов там, куда указывают --cfg-dir TIA_CONFIG_DIR.
Если их нет - в current working dir.
Если конфиги уже есть: ругаться, и ничего не делать.
Копировать:
* config/default-dir-config.js -> config.js
* default-suite-config.js -> suite-config.js

Сделать опцию --force-cur-dir, чтобы игнорировать --cfg-dir / TIA_CONFIG_DIR и создавать конфиги в CWD.

====

Соответственно поменять хелпы в tia и tia-tests.

========================


Выводить в консоль инфу о тесте.
suiteRoot (абсолютный путь).
profileRoot ().
Набор опций.

Может ли rc подгружать произвольные файлы?
Не трогать cmdLine и не трогать Environment.

Посмотреть конфиги.
Какие из опций действительно имеет смысл перегружать в директориях.

В конфиге отделить константы (типа имен ключевых файлов) от настроек конфигурации.

================

Опция - создать шаблон конфига в текущей директории.

Переменная окружения:
TIA_CONFIG_PATH
Опция --cfg-path
А может просто первый же параметр это и есть файл конфига (если есть).

---

А в конфиге сделать абсолютные пути:
suiteRoot
browserProfiles




Креденшлзы email отправителя - тоже в rc конфиге. 


Записывает в конфиг все возможные опции с дефолтными значениями и комментами.
Видимо, просто в движке файл такой создать, который будет копироваться.

В параметрах к tia задавать путь к rc файлу, где хранятся полные пути и 
все перегрузки конфигов и cmd опций.
Подумать, может как-то использовать переменные окружения?
Если модуль глобальный, неудобно править конфиги в сорцах модуля.
Да и даже если не глобальный.
Подумать, как по-другому хранить конфиги.
Может быть в `.*rc` файлах в testRoot.
Может быть в environment variables.


Сейчас непонятно где ищутся:
testSuite
browserProfiles

Перетащить все параметры в rc файлы?

========================

emptyDirToSuiteLog - перетащить в cmd line?

Diffs to meta log (как бы для отладки, и если дифы мелкие можно и для боевого режима).
Не выводить ожидаемые дифы.

==========

Добавить побольше разных assertions.
Задокументировать и структурировать все ф-и.
* ф-и для логирования.
* assertions
* actions

Написать побольше оберток на разные действия с элементами.

То, что написали парни обернуть в логи и разбить на ExtJs и R-Vision части.

==========

? Может быть на все экшны сделать опциональное msg, которое перегружает путь поиска элемента,
который может меняться.

Ещё раз поревьюить код. Задокументировать все JSDoc ом.

Написать тесты на каждую ф-ю. Проверить каждый параметр конфига и каждую cmd line опцию.

? Писать обзорные логи в текущую директорию, откуда запущена tia.
Или все-таки в suiteRoot?


Пробежаться по TODO в самом коде.

Большая проблема - хреновый call stack от Selenium WebDriver при ошибках - есть описание ошибки,
но нет нормального колл - стэка, т.к. у драйвера какая-то своя очередь.
Поисследовать это.

Допилить поддержку bamboo.js и запустить существующие тесты в нашем bamboo.

? Ещё структурировать assertions.
Получше изучить что есть в assertions из selenium testing, node.js, tape, mocha, chai, jasmine.
Добавить на основе этого ещё assertions.


Пробежаться и самому вспомнить все опции конфигов.

Эталонный металог.
AS PREV, AS ETH
Посмотреть как AS PREV проверяет, что дифы тоже те же.

inspect all files (JsHint, JsCs).

Подсвеченные дифы в консоль.
Дифы где показаны измененные куски.

WebStorm все-таки плохо поддерживает autocomplete.
Надо typings спецификацию сделать.
А может посмотреть как работает Visual Studio Code.

Проверить работу почты.

Переделать мои back-end и license тесты для работы с новым движком,
и проверить их на голом tia.

===========

Хелп по опциям.


// TODO: Сделать возможность просматривать дифы простой командой tia.js diff_number.

Пометить selenium опции. Движок может использоваться и не для GUI.

========

В конфиге задавать шаблоны, какие `*.js` файлы игнорировать.

========

Команда для очистки тестовой директории.

Удаляет все `*.log, *.dif`.


      -l (TODO) attach diffed logs to mail.
