===================



===================

driver.manage().logs().get(gT.sOrig.wdModule.logging.Type.BROWSER)

===================

Функциональность по прогону только тех тестов, где есть дифы.

===================

Отдельно инфо о компоненте формы.
logFormFieldInfo(formId, name, printContent);

===================

Распечатывать ControlFlow.getSchedule(true) при ошибках?

===================
Для табов - распечатка текста на табе.

===================

Поиск по референсу:

lookupReferenceHolder().lookupReference('form')
lookupReference - напрямую сработает у вьюхи, которой принадлежит контроллер.

===================

drop down menus in grid headers.

?? Что такое group header and sub headers?

======================

API для работы с деревом внутри комбобокса.

======================

Обернуть в try / catch все, что я ставлю в очередь на выполнение webdriver'ом.

======================

Посмотреть параметры этих функций, чтобы понять что в сорцах нужно менять:

* Ext.define
* Ext.create

Поддерживают ли обе эти ф-и id, reference, itemId ?

Интересно, что если я добавлю уже существующее имя reference ?

======================

Что за свойство: config.

======================

API для получения значения из контрола.
По id формы и имени контрола.
3 вида значений.
(Нужно искать контрол через name)

// TODO: form.down('[fieldLabel=Тип риска]').inputEl

=====================    

API для помещения значения в textBox (sendKeys).
Имя филда и label в лог при клике или при sendKeys.

=====================    

API для кликов по checkbox и по radiobutton.
Имя филда и label в лог при клике.

=====================    

API для нажатия на ExtJs кнопки.
API для кликов по checkbox и по radiobutton.
Имя филда и label в лог при клике.

=====================    

API для вытягивания ошибок в формах.

=====================    

Ext.mixin.Observable
Ext.EventManager
Что насчет preventDefault, stopPropagation?

Ext.Class
Ext.Base

Скроллинг клавиатурой по messageBox.

=====================

Почитать про Base Config, есть ли там мысль, что конфиги отражаются на свойства.
Есть мысль, что есть автогенеренные геттеры и сеттеры, видимо, для каждого ожидаемого конфига.
Проверить.

Однообразные сепараторы для content и для exploration, чтобы тестописатели привыкали.

Внести/задействовать в распечатку компонента параметр - объект с опциями
- что печатать, а что нет.
Все-таки привести исследовалку к виду, когда она будет
обозначать путь поиска элемента. Т.е. строку, которую можно скопи-пастить в код теста.
М.б. сделать фильтрацию в уже готовом массиве? .filter.

=====================

Есть ли в ExtJs компоненте информация из какого он сорца?
Может быть у ExtJs есть особый режим, в котором это показывается?

? Заменить initialConfig на getInitialConfig() ?

======================

Тест для всех видов API.
В том числе и для кликов по табам.
При кликах по табам - включить ожидание завершения AJAX вызовов в API.

======================

Попробовать использовать исследовательские скрипты в разработке / отладке.
Перенести код установки хэндлеров в браузерную часть.

======================

Прочитать доки про другие элементы управления.

======================

API для кликов по табам - поревьюить существующее и добавить, если чего-то не хватает.

======================

?? API, чтобы убедиться, что в дереве, таблице, комбобоксе (или другом пикере) есть определенный набор значений (и без разницы что там есть ещё).

======================

Подумать как перевести на TypeScript, можно ли переводить частично.
Как ставятся TypeScript npm модули.

======================

Подправить документацию для R-Vision.

======================

Вместо юзерского имени, может можно у таблиц выдернуть какой-то id, reference, itemId, заголовок, и т.д. И у деревьев тоже.

======================

Потестить API для кликов для таблиц, в которых модель распространяется не на все поля.

======================

API для работы со столбцами в таблицах.
Индекс строки, индекс столбца.

======================

В гридах и в Store глянуть отдельную ф-ю для поиска по id.

Получше отформатировать строку о записи.
Сделать режимы подробности вывода инфы,
в идеале в этом же диалоге в виде чекбоксов :).

======================

?? API для диалогов.

======================

?? API для проверки выделен ли заданный элемент.
isSelected ( node ) : Boolean 

======================

?? API для работы с Menu.

======================

?? API для поиска.
Элемент по name.
?? по label?
??? Найти элемент по ключу локали для метки.

======================

?? При работе с деревьями - сделать автоэкспанд перед кликом.
?? При работе с таблицами - тоже.

======================

http://docs.sencha.com/extjs/5.1.2/Ext.ClassManager.html

http://docs.sencha.com/extjs/5.1/core_concepts/components.html
http://docs.sencha.com/extjs/5.1/core_concepts/layouts.html
http://docs.sencha.com/extjs/5.1/application_architecture/application_architecture.html
http://docs.sencha.com/extjs/5.1/components/forms.html

В общем ещё раз пройтись по Guides с углубленным пониманием.

======================

При наведении мыши в messageBox - делать css border вокруг элемента.
При убирании - убирать.
Применять какие-нибудь Expandable штуки внутри диалога с исследованием элемента.

======================

focusRow
focusNode
focusCell
getNode

В исследовалке выводить имена полей модели компонента.

При серьезных ошибках с закрытием браузера останавливать удаленный драйвер?

cmd line option - запускать chrome c detached debug window.

==========

get - для ExtJs должна дождаться Url и дождаться всех Ajax вызовов.

treeStore.filter ?
cascadeBy
findChildBy
child.data.text

var rn = panel.getRootNode() - какого типа return value?
var c = rn.findChild("text","Also ASP.net",true); // Возможно ищет только в экспанднутом дереве?
c.expand();

а ещё есть node id и есть getNodeById.

грид имеет метод filter.

Можно ли rootNode взять у View не поднимаясь до panel.

```js

  var panel = me.up('panel'),
                    rn = panel.getRootNode(),
                    regex = new RegExp("ASP.net");

  rn.findChildBy(function (child) {
                    var text = child.data.text;
                    if (regex.test(text) === true) {
                        console.warn("selecting child", child);
                        panel.getSelectionModel().select(child, true);
                    }
                });
```

http://victorbarzana.blogspot.ru/2012/11/recursively-search-in-extjs-tree.html
https://gist.github.com/colinramsay/1789536

Ext.data.TreeStore - есть filters в конфигах.

Там какие-то Path должны быть для деревьев.

Перед считыванием грида проверять его "готовность", м.б. он в процессе обновления.
isVisible, isExpanded - что-то такое.

==========

?? Поддержать разные логи для одного теста.
Например, если меняются локали.

==========

Просто ф-я для распечатки объекта в лог.

Тест поддержки массивов в equalDeep.

cmd line параметр для подключения внешних файлов к тестам.
Перед каждым тестом все эти файлы удаляются.
После каждого теста - их содержимое прибавляется к логу теста.

==========

1.5h
Первый запуск дает DIF_FROM_PREV.
NO_PREV - если нет предыдущего ```*.mlog```.

2h
Сделать опцию, которая отключает сравнение с предыдущим ```*.mlog.```
Т.е. чтобы этой строки вообще не было в заголовке лога.

==========

2h.

В tia сделать опцию - подключать такой-то файлик к аттачменту почты.
(Нужно для лога коммитов).

==========

2h
Автор говорит, что jsdiff должен поддерживать utf8, перейти на jsdiff.
Поисследовать юникодные дифы.

==========

6h.
Добавить поддержку тэгов в тестах.
id, автоматизирован ли тест, приоритет.
Дать возможность гонять тесты только с определенными тегами.
Дать возможность просматривать список тестов с определенными тегами.

Можно сделать рядом с каждым тестом (js файлом) - файл с информацией о тесте.
В частности и с тегами.
Ещё там могут быть зависимости, какие-то пререквизиты, может быть ссылка на номер бага в Jira, и т.д.
В общем, любая доп. инфа по тесту.

* Ввести этот файл.
* Ввести поддержку какие тэги гонять, а какие-нет (символ !) в коммандной строке.
* Читать файл перед тестом, и принимать решение гонять или нет.

Сюда же можно добавить среднее время прохождения теста.

А в командную строку можно добавить опцию, при каком отклонении от среднего времени выдавать ворнинг.

==========

Проверить, посылаются ли на мейл скриншоты.

==========

Допереводить конфиги.
Убрать все русские комменты в коде.

==========

? Запускать тесты даже если нет изменений, для поиска спорадических багов.

Придумать механизм (наверное, передача параметров как объекта),
когда посылаю отдельно текст для поиска и текст для лога.
Это может быть какой-то хитрый CSS vs user-friendly текста для лога.

Потестить Exceptions во wrap.
А может целый тест на initBrHelpers().

Ещё можно тест на initExtJsBrHelpers() - это на R-Vision тестах.
Хотя, могу сделать своё ExtJs приложение, у них вроде для openSource лицензия есть.

===========

Показывать/перемещать курсор мыши при selenium тестах.
Опцией это сделать, чисто для демонстрации.

===========

Поналяпать всяких waitAndClick
Или даже просто добавить во все наши акшны - wait элементов.
А может ввести в конфиге флаг - ждать / не ждать.
Или ввести таймаут у ф-й, если не 0 (по умолчанию) - ждать.

--attach-to-email
Позволяет приаттачить к мейлу файлы, разделенные запятыми.

зачем я в URL употребляю $(host).
Может быть всегда его подразумевать?

==========

Попробовать ускорить логин, за счет предустановленных профайлов.
Не знаю нужно ли тут убивать логин.
Он, вроде, у меня автоматом убивается при hl login.
Но вообще нужно сделать режим, чтобы и без логина заходилось, если явно он не требуется тестом.

==========

Подсветить в консольном металоге.
EDIF
Fail

Подсветить трейсинг разными цветами.
3й темный, 2й посветлее. 1й - нормальным цветом.
А может быть весь трейсинг потемнее.

==========

? Подсветить хелп.

==========

?
Ожидаемые exception нужно превратить в pass строчки логов.
И они не должны попадать в консоль.
М.б. какой-нить expectException - в ассершнах.
без --debug-max или --err-to-console.

==========

Сделать возможность просматривать дифы простой командой tia.js diff_number.

==========

Добавить побольше разных assertions.
Задокументировать и структурировать все ф-и.
* ф-и для логирования.
* assertions
* actions

? Ещё структурировать assertions.
Получше изучить что есть в assertions из selenium testing, node.js, tape, mocha, chai, jasmine.
Добавить на основе этого ещё assertions.

==========

Написать побольше оберток на разные действия с элементами.

==========

? Может быть на все экшны сделать опциональное msg, которое перегружает путь поиска элемента,
который может меняться.

================================================

# Переделки в режимах запуска

Ввести команды:
tia <command> [options]

====

commands:

Опции, не используемые командой должны генерить - unknown option,
для повышение осознанности при пользовании движком.
Поэтому, сначала считываешь команду, затем задаешь параметры минимисту.

* run - прогнать тесты.

==

* init - создать шаблоны для рутовых конфигов там, куда указывают --cfg-dir TIA_CONFIG_DIR.
Если их нет - в current working dir.
Если конфиги уже есть: ругаться, и ничего не делать.
Копировать:
* config/default-dir-config.js -> config.js
* default-suite-config.js -> suite-config.js

====

Соответственно поменять хелпы в tia и tia-tests.

================================================

Большая проблема - хреновый call stack от Selenium WebDriver при ошибках - есть описание ошибки,
но нет нормального колл - стэка, т.к. у драйвера какая-то своя очередь.
Поисследовать это.

================================================

Информация об элементе под курсором в статусе или во всплывающем исчезающем тултипе.
Хелп по командах исследования - Ctrl + Alt + H.

================================================

http://docs.sencha.com/extjs/5.1/core_concepts/localization.html

================================================

Ещё раз поревьюить код. Задокументировать все JSDoc ом.
inspect all files (JsHint, JsCs).
Пробежаться по TODO в самом коде.

Написать тесты на каждую ф-ю. Проверить каждый параметр конфига и каждую cmd line опцию.

Поисследовать разные режимы дифф - утилит.
Подсвеченные дифы в консоль.
Дифы где показаны измененные куски.

================================================

WebStorm все-таки плохо поддерживает autocomplete.
Надо typings спецификацию сделать.
А может посмотреть как работает Visual Studio Code.

===========

Команда для очистки тестовой директории.

Удаляет все `*.log, *.dif`.

===========      

Сейчас есть шанс, что профайлы повторяются.
Может быть это и нормально, но нужно задокументировать.

===========

Проверить на виндах, что tia --help сработает, т.е. что --harmony сработает.

===========

* Добавить ошибку, что нет настроек для мейла, если мейл используется.

===========

Однозначно в log-viewer сделать возмжожность смотреть скриншоты.
Пилить хороший log-viwer.
Пилить поддержку всяких CI.

Автоматизировать всякие git blame.

===========

Поизучать sencha cmd с целью выжать какую-то производительность.
А может и параметры, управляющие генерацией всяких id шников.

=============

Post answers here with link to my tia engine (after adding more meat (assertions, selenium wrappers, extjs stuff)
to the engine):
http://stackoverflow.com/questions/8344776/can-selenium-interact-with-an-existing-browser-session
http://sqa.stackexchange.com/questions/1988/selenium-reuse-existing-browser-session-instead-of-opening-new-windows

=============

Разбивать трейсинг не только по уровню, но и по контексту.
Т.е. от каких функциональностей он нужен, а от каких - нет.
--trace-ctx dirWalker, rmDriver, etc.
gIn.tracer.traceI(msg, ctx);
if (ctx in traceCtx).
(indexOf ?).
Если нет --trace-ctx - трейсить все.
Отсортированный массив, оптимизированный поиск.

```js
/**
 * Performs a binary search on the host array. This method can either be
 * injected into Array.prototype or called with a specified scope like this:
 * binaryIndexOf.call(someArray, searchElement);
 *
 * @param {*} searchElement The item to search for within the array.
 * @return {Number} The index of the element which defaults to -1 when not found.
 */
function binaryIndexOf(searchElement) {
    'use strict';
 
    var minIndex = 0;
    var maxIndex = this.length - 1;
    var currentIndex;
    var currentElement;
 
    while (minIndex <= maxIndex) {
        currentIndex = (minIndex + maxIndex) / 2 | 0;
        currentElement = this[currentIndex];
 
        if (currentElement < searchElement) {
            minIndex = currentIndex + 1;
        }
        else if (currentElement > searchElement) {
            maxIndex = currentIndex - 1;
        }
        else {
            return currentIndex;
        }
    }
```

=============

log as overriding Executor.execute function?
So I can track all selenium commands and their parameters.
  
=============

? Выводить diff mlogа to console.
for et and for prev.

Сделать обертку на все ф-и, могущие кинуть исключение.
Может быть это поможет лучше отлаживаться.
А то selenium execute flow никакой инфы не говорит.
М.б. где-то это настраивается?

Ошибки в скриптах внутри браузера.
М.б. то, что перехватил в unhandled exceptions - распечатывать.
Только фигово, что на самом деле скрипта нет, есть исполненная разок ф-я.


Selenium быстрее работает через id или через WebElement?



TODO: в тестах проставлять ID от тестлинко-подобных тулзов?
TODO: зависимости тестов.

Поотлаживаться на Windows.

Поотлаживаться на FireFox.
IE ??

Пройтись по TODO в коде.

=======================

В деревьях распечатывать только: Ext.tree.Panel.displayField?

========================

Запинать все на Firefox и перейти на него при отладке.
Сравнить возможности отладочных тулзов при работе с WebDriver.

Вывод инфы о ячейках таблицы и о ячейках заголовка таблицы в исследовалке.

Подумать о переходе на Java WebDriver - побольше возможностей, получше документация:
http://eclipsesource.com/blogs/2016/07/20/running-node-js-on-the-jvm/?utm_source=nodeweekly&utm_medium=email

=======================

https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/2766

Сделать список известных проблем с Selenium, который девелоперы могут смотреть в первую очередь.

Containers.js:
Разве reference можно задавать в Ext.define ??
А id ?

getIdByFn() : custom function to get id.
getCompByFn()

===================

Поотлаживать non clickable ?

Похоже элемент дергается, как раз после 5 секунд задержки.
Но может это связано с ошибкой.
А в test_production нет скроллбаров.
Элемент содержит рисунки 1х1.

===================